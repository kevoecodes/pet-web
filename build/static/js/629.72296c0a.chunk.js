"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[629],{43629:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var s=n(29439),i=n(40621),r=n(9019),c=n(57829),l=n(75697),a=n(98466),o=n(61805),d=n(47313),u=n(58467),h=n(36594),x=n(77841),j=n(1413),g=n(19536),m=n(61113),f=n(42832),p=n(69099),b=n(73319),y=n(55585),Z=n(81190),v=n(46417),_=function(e){var t=e.voucher;return console.log("Logger",t.status>=o.SU.VERIFIED&null!==t.verified_by),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(Z.Z,{progressDot:!0,current:t.status,direction:"vertical",items:[{title:"Requested",description:(0,v.jsxs)(v.Fragment,{children:["Requested by"," ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.created_by.first_name," ",t.created_by.last_name]})," ","at ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,l.gg)(t.created_at)," "]})]})},{title:"Verified",description:(0,v.jsx)(v.Fragment,{children:t.status>=o.SU.VERIFIED&null!==t.verified_by?(0,v.jsxs)(v.Fragment,{children:[" ","Verified_by"," ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.verified_by.first_name," ",t.verified_by.last_name]})," ","at ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,l.gg)(t.verified_at)," "]})," "]}):"Not verified"})},{title:"Approved",description:(0,v.jsx)(v.Fragment,{children:t.status>=o.SU.APPROVED&&null!==t.approved_by?(0,v.jsxs)(v.Fragment,{children:[" ","Approved by"," ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.approved_by.first_name," ",t.approved_by.last_name]})," ","at ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,l.gg)(t.approved_at)," "]})]}):"Not Aprroved"})},{title:"Paid",description:(0,v.jsx)(v.Fragment,{children:t.status===o.SU.PAID&&null!==t.paid_by?(0,v.jsxs)(v.Fragment,{children:[" ","Payments done by"," ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.paid_by.first_name," ",t.paid_by.last_name]})," ","at ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,l.gg)(t.paid_at)," "]})]}):"No payments done"})}]})})},P=n(17592),S=n(4869),E=((0,P.ZP)(r.ZP)((function(e){var t=e.theme;return(0,j.Z)((0,j.Z)({width:"100%"},t.typography.body2),{},{'& [role="separator"]':{margin:t.spacing(0,2)}})})),function(e){var t=e.voucher,n=e.editVoucherStatus,c=(0,d.useState)(0),a=(0,s.Z)(c,2);a[0],a[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,children:[(0,v.jsxs)(r.ZP,{item:!0,xs:7,children:[(0,v.jsx)(g.Z,{children:"Voucher details"}),(0,v.jsx)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,children:(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsx)(b.k,{title:"Voucher Title",value:t.title})})}),(0,v.jsx)(r.ZP,{container:!0,children:(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsx)(b.k,{title:"Voucher Details",value:(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(i.Z,{children:(0,v.jsx)(m.Z,{variant:"h6",children:t.details})})})})})})]}),(0,v.jsxs)(r.ZP,{item:!0,xs:5,children:[(0,v.jsx)(g.Z,{children:"Voucher details"}),t.status===o.SU.REJECTED?(0,v.jsx)(y.ZP,{status:"error",title:"Rejected",subTitle:(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(v.Fragment,{children:["Rejected by"," ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.rejected_by.first_name," ",t.rejected_by.last_name]})," ","at ",(0,v.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,l.gg)(t.rejected_at)," "]})]})})}):(0,v.jsx)(_,{voucher:t})]})]}),(0,v.jsx)(S.Z,{amount:t.amount}),(0,v.jsx)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"flex-end",children:(0,v.jsxs)(f.Z,{spacing:2,direction:"row",children:[(0,v.jsx)(p.Z,{variant:"outlined",color:"error",onClick:function(){return n(o.SU.REJECTED)},children:"Reject"}),(0,v.jsx)(p.Z,{variant:"outlined",color:"success",onClick:function(){return n(o.SU.VERIFIED)},children:"Verify"}),(0,v.jsx)(p.Z,{variant:"outlined",color:"success",onClick:function(){return n(o.SU.APPROVED)},children:"Approve"}),(0,v.jsx)(p.Z,{variant:"outlined",color:"success",onClick:function(){return n(o.SU.PAID)},children:"Paid"})]})})]})}),F=n(29814),A=n(8105),V=n(71415),I=function(e){var t=e.voucher,n=(0,d.useState)(!0),i=(0,s.Z)(n,2),c=i[0],l=i[1],a=(0,d.useState)([]),o=(0,s.Z)(a,2),u=o[0],x=o[1];return(0,d.useEffect)((function(){(0,h.Bl)(t.id).then((function(e){console.log(e),x(e),l(!1)})).catch((function(e){console.log(e)}))}),[]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(F.Ae,{isLoading:c,children:0===u.length?(0,v.jsx)(A.Z,{description:"No attachments"}):(0,v.jsx)(r.ZP,{container:!0,mb:3,mt:1,alignItems:"center",justifyContent:"flex-start",children:(0,v.jsx)(V.Z,{attachments:u})})})})},C=[{label:(0,v.jsx)("div",{style:{padding:4},children:"Details"}),value:o.sy.DETAILS},{label:(0,v.jsx)("div",{style:{padding:4},children:"Attachments"}),value:o.sy.ATTACHMENTS}],D=function(){var e=(0,d.useState)(!0),t=(0,s.Z)(e,2),n=t[0],j=t[1],g=(0,d.useState)(null),m=(0,s.Z)(g,2),f=m[0],p=m[1],b=(0,d.useState)(o.sy.DETAILS),y=(0,s.Z)(b,2),Z=y[0],_=y[1],P=(0,u.s0)(),S=(0,u.UO)(),A=function(){(0,h.JN)(S.voucher_id).then((function(e){console.log(e),p(e),j(!1)})).catch((function(e){console.log(e),x.Z.error("Failed to load Voucher details"),P("/bl-charges",{replace:!0})}))};return(0,d.useEffect)((function(){A()}),[]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(F.tv,{isLoading:n,children:null!==f&&(0,v.jsx)(i.Z,{title:(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(r.ZP,{container:!0,spacing:3,alignItems:"center",children:[(0,v.jsxs)(r.ZP,{item:!0,xs:3,children:["Voucher Number: #",f.voucher_number]}),(0,v.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:6,sx:{ml:"auto"},children:(0,v.jsx)(r.ZP,{container:!0,alignItems:"center",justifyContent:"flex-end",pr:2,children:(0,l.AB)(f.status)})})]})}),content:!1,border:!1,boxShadow:!0,children:(0,v.jsxs)(c.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:[(0,v.jsx)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"center",children:(0,v.jsx)(a.Z,{style:{width:"60%"},block:!0,options:C,onChange:function(e){_(e)}})}),Z===o.sy.DETAILS&&(0,v.jsx)(E,{voucher:f,editVoucherStatus:function(e){return function(e){var t={status:e};(0,h.b6)(S.voucher_id,t).then((function(e){console.log(e),x.Z.success("Voucher status updated successfully"),A()})).catch((function(e){x.Z.error("Failed to updated Voucher status"),console.log(e)}))}(e)}}),Z===o.sy.ATTACHMENTS&&(0,v.jsx)(I,{voucher:f})]})})})})}}}]);
"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[110],{63669:function(e,n,t){t.d(n,{Rn:function(){return s},gg:function(){return i}});var r=t(22098),i=(t(46417),function(e){return new Date(e).toLocaleString()}),s=function(e){(0,r.nD)().then((function(n){console.log(n),e(n)})).catch((function(e){console.log(e)}))}},77841:function(e,n,t){var r=t(15671),i=t(43144),s=t(26660),o=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,[{key:"success",value:function(e){s.s&&s.s.enqueueSnackbar(e,{variant:"success"})}},{key:"error",value:function(e){s.s&&s.s.enqueueSnackbar(e,{variant:"error"})}}]),e}();n.Z=new o},42110:function(e,n,t){t.r(n);var r=t(70885),i=(t(28089),t(57829)),s=(t(69490),t(7410),t(47313)),o=t(40621),a=t(22098),l=t(77841),u=t(58467),c=t(22778),d=(t(63669),t(46417));n.default=function(){var e=s.useState(!1),n=(0,r.Z)(e,2),t=n[0],h=n[1],m=s.useState([]),p=(0,r.Z)(m,2),f=p[0],g=(p[1],s.useState(!1)),x=(0,r.Z)(g,2),Z=(x[0],x[1],(0,u.s0)());return(0,s.useEffect)((function(){}),[]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(o.Z,{title:"Creating a User",content:!1,border:!1,boxShadow:!0,children:(0,d.jsx)(i.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,d.jsx)(c.Z,{role_options:f,onSubmitForm:function(e){return function(e){h(!0),(0,a.OP)(e).then((function(e){console.log(e),h(!1),l.Z.success("User Created successfully"),Z("/users",{replace:!0})})).catch((function(e){console.log(e),l.Z.error("Failed to create user"),h(!1)}))}(e)},loading:t})})})})}},22778:function(e,n,t){var r=t(74165),i=t(15861),s=t(70885),o=t(9019),a=t(42832),l=t(23306),u=t(37843),c=t(15480),d=t(24256),h=t(51405),m=t(7410),p=t(28089),f=t(69490),g=t(51406),x=t(47313),Z=t(46417);n.Z=function(e){var n=e.onSubmitForm,t=(e.role_options,e.loading),v=e.initial_role,j=void 0===v?"":v,b=e.initialValues,_=void 0===b?null:b,S=(0,x.useState)(j),w=(0,s.Z)(S,2),P=w[0],k=w[1],C=(0,x.useState)(!1),y=(0,s.Z)(C,2),F=y[0],q=y[1];return console.log("Initial Values",_),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(m.J9,{initialValues:null===_?{first_name:"",last_name:"",cellphone:"",email:"",role:""}:_,validationSchema:p.Ry().shape({email:p.Z_().email("Must be a valid email").max(255).required("Email is required"),first_name:p.Z_().max(255).required("First Name is required"),last_name:p.Z_().max(255).required("Last Name is required"),cellphone:p.Z_().max(9).min(9).required("Phone Number is required")}),onSubmit:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.setErrors,i.setStatus,i.setSubmitting,""!==P&&(t.role=P,n(t));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),children:function(e){var n=e.errors,r=e.handleBlur,i=e.handleChange,s=e.handleSubmit,m=(e.isSubmitting,e.touched),p=e.values;return(0,Z.jsxs)("form",{noValidate:!0,onSubmit:function(e){q(""===P),s(e)},children:[(0,Z.jsxs)(o.ZP,{container:!0,spacing:3,mb:3,children:[(0,Z.jsx)(o.ZP,{item:!0,xs:6,children:(0,Z.jsxs)(a.Z,{spacing:1,children:[(0,Z.jsx)(l.Z,{htmlFor:"bootstrap",children:"First Name"}),(0,Z.jsx)(u.Z,{id:"email-login",type:"text",value:p.first_name,name:"first_name",onBlur:r,onChange:i,placeholder:"eg. John",fullWidth:!0,error:Boolean(m.first_name&&n.first_name)}),m.first_name&&n.first_name&&(0,Z.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.first_name})]})}),(0,Z.jsx)(o.ZP,{item:!0,xs:6,children:(0,Z.jsxs)(a.Z,{spacing:1,children:[(0,Z.jsx)(l.Z,{htmlFor:"bootstrap",children:"Last Name"}),(0,Z.jsx)(u.Z,{id:"email-login",type:"text",value:p.last_name,name:"last_name",onBlur:r,onChange:i,placeholder:"eg. Doe",fullWidth:!0,error:Boolean(m.last_name&&n.last_name)}),m.last_name&&n.last_name&&(0,Z.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.last_name})]})})]}),(0,Z.jsxs)(o.ZP,{container:!0,spacing:3,mb:3,children:[(0,Z.jsx)(o.ZP,{item:!0,xs:6,children:(0,Z.jsxs)(a.Z,{spacing:1,children:[(0,Z.jsx)(l.Z,{htmlFor:"bootstrap",children:"Phone Number"}),(0,Z.jsx)(u.Z,{id:"email-login",type:"number",value:p.cellphone,name:"cellphone",onBlur:r,onChange:i,placeholder:"eg. 0711111111",fullWidth:!0,error:Boolean(m.cellphone&&n.cellphone)}),m.cellphone&&n.cellphone&&(0,Z.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.cellphone})]})}),(0,Z.jsx)(o.ZP,{item:!0,xs:6,children:(0,Z.jsxs)(a.Z,{spacing:1,children:[(0,Z.jsx)(l.Z,{htmlFor:"bootstrap",children:"Email Address"}),(0,Z.jsx)(u.Z,{id:"email-login",type:"email",value:p.email,name:"email",onBlur:r,onChange:i,placeholder:"eg. example@gmail.com",fullWidth:!0,error:Boolean(m.email&&n.email)}),m.email&&n.email&&(0,Z.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.email})]})})]}),(0,Z.jsxs)(o.ZP,{container:!0,spacing:3,mb:3,children:[(0,Z.jsx)(o.ZP,{item:!0,xs:6,children:(0,Z.jsxs)(a.Z,{spacing:1,children:[(0,Z.jsx)(l.Z,{htmlFor:"bootstrap",children:"Role"}),(0,Z.jsxs)(d.Z,{labelId:"demo-simple-select-disabled-label",id:"demo-simple-select-disabled",value:P,onChange:function(e){q(!1),k(e.target.value)},error:Boolean(F),children:[(0,Z.jsx)(h.Z,{value:0,children:"Admin"}),(0,Z.jsx)(h.Z,{value:1,children:"User"})]}),F&&(0,Z.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:"Select Role"})]})}),n.submit&&(0,Z.jsx)(o.ZP,{item:!0,xs:12,children:(0,Z.jsx)(c.Z,{error:!0,children:n.submit})})]}),(0,Z.jsx)(o.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mg:3,children:(0,Z.jsx)(o.ZP,{item:!0,xs:6,children:(0,Z.jsx)(f.Z,{children:(0,Z.jsx)(g.Z,{disableElevation:!0,disabled:t,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",loading:t,children:"Submit"})})})})]})}})})}},22098:function(e,n,t){t.d(n,{Um:function(){return f},nD:function(){return g},gi:function(){return p},rW:function(){return h},Qb:function(){return c},OP:function(){return m},vy:function(){return d}});var r=t(56573),i="http://161.35.210.153:8080/",s=t(26660);function o(e,n){return new Promise((function(t,s){r.Z.post(i+e,n).then((function(e){e.headers,t(e.data)})).catch((function(e){e.response&&(401===e.response.status||400===e.response.status||500===e.response.status||e.response&&429===e.response.status||console.log("Error occurred, status: "+e.response.status)),console.log(e),s(e)}))}))}function a(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(o,a){r.Z.get(i+e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){o(e.data)})).catch((function(e){e.response?e.response&&401===e.response.status&&n&&!t||e.response&&e.response.status:s.s&&s.s.enqueueSnackbar("No network available, Please Connect to a Network!",{variant:"warning"}),a(e)}))}))}function l(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(o,a){r.Z.post(i+e,n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){o(e.data)})).catch((function(e){e.response&&401===e.response.status&&t&&!s||(e.response&&e.response.status,a(e))}))}))}function u(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(o,a){r.Z.put(i+e,n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){o(e.data)})).catch((function(e){e.response&&401===e.response.status&&t&&!s||(e.response&&e.response.status,a(e))}))}))}function c(e,n){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r={};return""!==t&&(r.mfaCode=t),o("api/auth/login",{email:e,password:n},!1)}function d(e,n,t){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i={};return""!==r&&(i.mfaCode=r),l("api/auth/reset-password/"+t,{password:e,confirm_password:n},!1)}function h(){return a("api/v1/users-list/")}function m(e){return l("api/v1/register-user",e)}function p(e){return a("api/v1/user/"+e)}function f(e,n){return u("api/v1/user/"+e,n)}function g(){return a("api/v1/roles")}}}]);
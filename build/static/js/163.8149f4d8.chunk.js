"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[163],{99163:function(e,l,i){i.r(l);var n=i(29439),r=i(58467),a=i(22778),t=i(47313),s=i(19768),o=i(77841),d=i(40621),c=i(57829),m=i(46417);l.default=function(){var e=(0,t.useState)(null),l=(0,n.Z)(e,2),i=l[0],h=l[1],u=(0,t.useState)(!1),x=(0,n.Z)(u,2),p=x[0],Z=(x[1],(0,t.useState)(!0)),g=(0,n.Z)(Z,2),j=g[0],f=g[1],b=(0,r.UO)(),_=(0,r.s0)();console.log("Params",b);return(0,t.useEffect)((function(){(0,s.gi)(b.user_id).then((function(e){h({first_name:e.first_name,last_name:e.last_name,cellphone:e.cellphone,email:e.email,role:null!==e.role?e.role:""}),f(!1)})).catch((function(e){console.log(e),o.Z.error("Failed to load user details"),_("/users",{replace:!0})}))}),[]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(d.Z,{title:"Editing a User",content:!1,border:!1,boxShadow:!0,children:(0,m.jsx)(c.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:!j&&(0,m.jsx)(a.Z,{initialValues:i,onSubmitForm:function(e){return function(e){console.log(e),(0,s.Um)(b.user_id,e).then((function(e){console.log(e),o.Z.success("User details edited successfully"),_("/users",{replace:!0})})).catch((function(e){console.log(e),o.Z.error("Failed to edit user details")}))}(e)},initial_role:i.role,loading:p})})})})}},22778:function(e,l,i){var n=i(74165),r=i(15861),a=i(29439),t=i(9019),s=i(42832),o=i(23306),d=i(37843),c=i(15480),m=i(24256),h=i(51405),u=i(7410),x=i(28089),p=i(69490),Z=i(51406),g=i(47313),j=i(46417);l.Z=function(e){var l=e.onSubmitForm,i=(e.role_options,e.loading),f=e.initial_role,b=void 0===f?"":f,_=e.initialValues,v=void 0===_?null:_,S=(0,g.useState)(b),P=(0,a.Z)(S,2),w=P[0],F=P[1],y=(0,g.useState)(!1),B=(0,a.Z)(y,2),C=B[0],q=B[1];return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(u.J9,{initialValues:null===v?{first_name:"",last_name:"",cellphone:"",email:"",role:""}:v,validationSchema:x.Ry().shape({email:x.Z_().email("Must be a valid email").max(255).required("Email is required"),first_name:x.Z_().max(255).required("First Name is required"),last_name:x.Z_().max(255).required("Last Name is required"),cellphone:x.Z_().max(9).min(9).required("Phone Number is required")}),onSubmit:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(i,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setErrors,r.setStatus,r.setSubmitting,""!==w&&(i.role=w,l(i));case 2:case"end":return e.stop()}}),e)})));return function(l,i){return e.apply(this,arguments)}}(),children:function(e){var l=e.errors,n=e.handleBlur,r=e.handleChange,a=e.handleSubmit,u=(e.isSubmitting,e.touched),x=e.values;return(0,j.jsxs)("form",{noValidate:!0,onSubmit:function(e){q(""===w),a(e)},children:[(0,j.jsxs)(t.ZP,{container:!0,spacing:3,mb:3,children:[(0,j.jsx)(t.ZP,{item:!0,xs:6,children:(0,j.jsxs)(s.Z,{spacing:1,children:[(0,j.jsx)(o.Z,{htmlFor:"bootstrap",children:"First Name"}),(0,j.jsx)(d.Z,{id:"email-login",type:"text",value:x.first_name,name:"first_name",onBlur:n,onChange:r,placeholder:"eg. John",fullWidth:!0,error:Boolean(u.first_name&&l.first_name)}),u.first_name&&l.first_name&&(0,j.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:l.first_name})]})}),(0,j.jsx)(t.ZP,{item:!0,xs:6,children:(0,j.jsxs)(s.Z,{spacing:1,children:[(0,j.jsx)(o.Z,{htmlFor:"bootstrap",children:"Last Name"}),(0,j.jsx)(d.Z,{id:"email-login",type:"text",value:x.last_name,name:"last_name",onBlur:n,onChange:r,placeholder:"eg. Doe",fullWidth:!0,error:Boolean(u.last_name&&l.last_name)}),u.last_name&&l.last_name&&(0,j.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:l.last_name})]})})]}),(0,j.jsxs)(t.ZP,{container:!0,spacing:3,mb:3,children:[(0,j.jsx)(t.ZP,{item:!0,xs:6,children:(0,j.jsxs)(s.Z,{spacing:1,children:[(0,j.jsx)(o.Z,{htmlFor:"bootstrap",children:"Phone Number"}),(0,j.jsx)(d.Z,{id:"email-login",type:"number",value:x.cellphone,name:"cellphone",onBlur:n,onChange:r,placeholder:"eg. 0711111111",fullWidth:!0,error:Boolean(u.cellphone&&l.cellphone)}),u.cellphone&&l.cellphone&&(0,j.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:l.cellphone})]})}),(0,j.jsx)(t.ZP,{item:!0,xs:6,children:(0,j.jsxs)(s.Z,{spacing:1,children:[(0,j.jsx)(o.Z,{htmlFor:"bootstrap",children:"Email Address"}),(0,j.jsx)(d.Z,{id:"email-login",type:"email",value:x.email,name:"email",onBlur:n,onChange:r,placeholder:"eg. example@gmail.com",fullWidth:!0,error:Boolean(u.email&&l.email)}),u.email&&l.email&&(0,j.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:l.email})]})})]}),(0,j.jsxs)(t.ZP,{container:!0,spacing:3,mb:3,children:[(0,j.jsx)(t.ZP,{item:!0,xs:6,children:(0,j.jsxs)(s.Z,{spacing:1,children:[(0,j.jsx)(o.Z,{htmlFor:"bootstrap",children:"Role"}),(0,j.jsxs)(m.Z,{labelId:"demo-simple-select-disabled-label",id:"demo-simple-select-disabled",value:w,onChange:function(e){q(!1),F(e.target.value)},error:Boolean(C),children:[(0,j.jsx)(h.Z,{value:0,children:"Admin"}),(0,j.jsx)(h.Z,{value:1,children:"User"})]}),C&&(0,j.jsx)(c.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:"Select Role"})]})}),l.submit&&(0,j.jsx)(t.ZP,{item:!0,xs:12,children:(0,j.jsx)(c.Z,{error:!0,children:l.submit})})]}),(0,j.jsx)(t.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mg:3,children:(0,j.jsx)(t.ZP,{item:!0,xs:6,children:(0,j.jsx)(p.Z,{children:(0,j.jsx)(Z.Z,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",loading:i,children:"Submit"})})})})]})}})})}}}]);
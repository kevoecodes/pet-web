"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[732],{57732:function(e,n,i){i.r(n);var t=i(29439),r=i(47313),a=i(40621),o=i(19768),l=i(77841),s=i(58467),c=i(96996),d=i(46417);n.default=function(){var e=(0,r.useState)(!1),n=(0,t.Z)(e,2),i=n[0],u=n[1],m=(0,s.s0)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(a.Z,{content:!1,border:!1,boxShadow:!0,children:(0,d.jsx)(c.Z,{loading:i,onSubmitForm:function(e){return function(e){(0,o.zd)(e).then((function(e){console.log("Response",e),l.Z.success("Pet was successfully added"),m("/pets",{replace:!0})})).catch((function(e){u(!1),console.log(e),l.Z.error("Failed to add Pet")}))}(e)}})})})}},96996:function(e,n,i){i.d(n,{Z:function(){return F}});var t=i(74165),r=i(15861),a=i(29439),o=i(57829),l=i(9019),s=i(42832),c=i(23306),d=i(37843),u=i(15480),m=i(19536),h=i(7410),x=i(28089),p=i(77841),g=i(53764),Z=i(82138),v=i(1122),j=i(62686),f=i(47313),b=i(41209),P=i(46417),y=function(e){var n="image/jpeg"===e.type||"image/png"===e.type;n||v.ZP.error("You can only upload JPG/PNG file!").then();var i=e.size/1024/1024<2;return i||v.ZP.error("Image must smaller than 2MB!").then(),n&&i},S=function(e){var n=e.setPetIcon,i=(0,f.useState)(!1),t=(0,a.Z)(i,2),r=t[0],o=t[1],l=(0,f.useState)(),s=(0,a.Z)(l,2),c=s[0],d=s[1],u=(0,P.jsxs)("div",{children:[r?(0,P.jsx)(g.Z,{}):(0,P.jsx)(Z.Z,{}),(0,P.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(j.Z,{name:"image",listType:"picture-circle",className:"avatar-uploader",showUploadList:!1,action:b.D.apiURL+"api/v1/upload-image",beforeUpload:y,onChange:function(e){var i=e.file,t=i.status,r=i.response;"uploading"!==t?"done"===t&&(n(r.name),function(e,n){var i=new FileReader;i.addEventListener("load",(function(){return n(i.result)})),i.readAsDataURL(e)}(e.file.originFileObj,(function(e){o(!1),d(e)}))):o(!0)},children:c?(0,P.jsx)("img",{src:c,alt:"avatar",style:{width:"100%"}}):u})})},w=i(69490),_=i(51406),F=function(e){var n=e.onSubmitForm,i=e.loading,g=void 0!==i&&i,Z=e.initialValues,v=void 0===Z?null:Z,j=e.initialPetIcon,b=void 0===j?null:j,y=(0,f.useState)(b),F=(0,a.Z)(y,2),C=F[0],I=F[1];return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(o.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,P.jsx)(h.J9,{initialValues:null!==v?v:{name:"",device_no:"",icon:null,submit:null},validationSchema:x.Ry().shape({name:x.Z_().max(255).required("Pet Name is required"),device_no:x.Z_().max(255).required("Device Number is required")}),onSubmit:function(){var e=(0,r.Z)((0,t.Z)().mark((function e(i,r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setErrors,r.setStatus,r.setSubmitting,null===C){e.next=5;break}return i.icon=C,n(i),e.abrupt("return");case 5:p.Z.error("Pet Icon not uploaded");case 6:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),children:function(e){var n=e.errors,i=e.handleBlur,t=e.handleChange,r=e.handleSubmit,a=(e.isSubmitting,e.touched),o=e.values;return(0,P.jsxs)("form",{noValidate:!0,onSubmit:r,children:[(0,P.jsxs)(l.ZP,{container:!0,spacing:3,mb:3,children:[(0,P.jsx)(l.ZP,{item:!0,xs:6,children:(0,P.jsxs)(s.Z,{spacing:1,children:[(0,P.jsx)(c.Z,{htmlFor:"bootstrap",children:"Pet Name"}),(0,P.jsx)(d.Z,{id:"email-login",type:"text",value:o.name,name:"name",onBlur:i,onChange:t,placeholder:"eg. Cat",fullWidth:!0,error:Boolean(a.name&&n.name)}),a.name&&n.name&&(0,P.jsx)(u.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.name})]})}),(0,P.jsx)(l.ZP,{item:!0,xs:6,children:(0,P.jsxs)(s.Z,{spacing:1,children:[(0,P.jsx)(c.Z,{htmlFor:"bootstrap",children:"Device Number"}),(0,P.jsx)(d.Z,{id:"email-login",type:"text",value:o.device_no,name:"device_no",onBlur:i,onChange:t,placeholder:"eg. DEV_0094FGGG",fullWidth:!0,error:Boolean(a.device_no&&n.device_no)}),a.device_no&&n.device_no&&(0,P.jsx)(u.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.device_no})]})})]}),(0,P.jsx)(m.Z,{children:"Pet Icon"}),(0,P.jsx)(l.ZP,{container:!0,spacing:3,mt:3,mb:3,alignItems:"center",justifyContent:"center",children:(0,P.jsx)(l.ZP,{children:(0,P.jsx)(S,{setPetIcon:I})})}),(0,P.jsx)(l.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mg:3,children:(0,P.jsx)(l.ZP,{item:!0,xs:6,children:(0,P.jsx)(w.Z,{children:(0,P.jsx)(_.Z,{disableElevation:!0,disabled:g,loading:g,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Submit"})})})})]})}})})})}}}]);
"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[518],{35509:function(n,e,t){var r=t(1413),o=t(93433),i=t(66736),a=t(55116),s=t(89939),u=t(41209),c=t(46417),l=a.Z.Dragger;e.Z=function(n){var e=n.setFileNames,t={name:"file",multiple:!0,action:u.D.apiURL+"api/v1/upload-file",onChange:function(n){console.log(n);var t=n.file,r=t.status,i=t.response;"uploading"!==r&&console.log(n.file,n.fileList),"done"===r?(e((function(n){return[].concat((0,o.Z)(n),[{file_name:i.name}])})),s.ZP.success("".concat(n.file.name," file uploaded successfully.")).then()):"error"===r&&s.ZP.error("".concat(n.file.name," file upload failed.")).then()},onDrop:function(n){console.log("Dropped files",n.dataTransfer.files)}};return(0,c.jsxs)(l,(0,r.Z)((0,r.Z)({},t),{},{children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(i.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]}))}},77841:function(n,e,t){var r=t(15671),o=t(43144),i=t(58976),a=function(){function n(){(0,r.Z)(this,n)}return(0,o.Z)(n,[{key:"success",value:function(n){i.s&&i.s.enqueueSnackbar(n,{variant:"success"})}},{key:"error",value:function(n){i.s&&i.s.enqueueSnackbar(n,{variant:"error"})}}]),n}();e.Z=new a},94518:function(n,e,t){t.r(e);var r=t(1413),o=t(74165),i=t(15861),a=t(29439),s=t(28089),u=t(57829),c=t(9019),l=t(23306),f=t(24631),d=t(42832),h=t(49914),p=t(15480),m=t(19536),g=t(69490),v=t(7410),Z=t(47313),b=t(40621),x=t(36594),j=t(77841),w=t(58467),S=t(44178),P=t(51406),k=t(35509),C=t(46417);e.default=function(){var n=(0,Z.useState)(!1),e=(0,a.Z)(n,2),t=e[0],_=e[1],L=(0,Z.useState)(null),y=(0,a.Z)(L,2),B=y[0],N=y[1],D=(0,Z.useState)(null),O=(0,a.Z)(D,2),R=O[0],U=O[1],A=(0,Z.useState)([]),F=(0,a.Z)(A,2),T=F[0],I=F[1],J=(0,Z.useState)([]),q=(0,a.Z)(J,2),z=q[0],E=q[1],G=(0,Z.useState)([]),H=(0,a.Z)(G,2),V=H[0],W=H[1],Q=(0,w.s0)(),K=(0,w.TH)(),M=new URLSearchParams(K.search).get("bl"),X=function(){(0,x.r2)().then((function(n){console.log(n),E(n.results),void 0!==M&&(0,x.GV)(M).then((function(n){N(n)})).catch((function(n){console.log(n)}))})).catch((function(n){console.log(n)}))};(0,Z.useEffect)((function(){(0,x.CT)().then((function(n){console.log(n),I(n.results)})).catch((function(n){console.log(n)})),X()}),[]);var Y=function(n){if(null!==R&&null!==B){_(!0);var e={amount:n.amount,bill_of_loading:B.id,charge:R.id,attachments:V};(0,x.SP)(e).then((function(n){console.log(n),j.Z.success("Bill of loading Charge successfully created"),Q("/bl-charges",{replace:!0})})).catch((function(n){j.Z.error("Failed to add Bill of loading charge"),_(!1),console.log(n)}))}};return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(b.Z,{title:"Adding Bill Of Loading Charge",content:!1,border:!1,boxShadow:!0,children:(0,C.jsx)(u.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,C.jsx)(v.J9,{initialValues:{amount:"",submit:null},validationSchema:s.Ry().shape({amount:s.Z_().max(7).required("Amount is required")}),onSubmit:function(){var n=(0,i.Z)((0,o.Z)().mark((function n(e,t){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.setErrors,t.setStatus,t.setSubmitting,Y(e);case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),children:function(n){var e=n.errors,o=n.handleBlur,i=n.handleChange,a=n.handleSubmit,s=(n.isSubmitting,n.touched),v=n.values;return(0,C.jsxs)("form",{noValidate:!0,onSubmit:a,children:[(0,C.jsxs)(c.ZP,{container:!0,spacing:3,mb:3,children:[(0,C.jsxs)(c.ZP,{item:!0,xs:6,children:[(0,C.jsx)(l.Z,{htmlFor:"bootstrap",children:"Bill Of Loading"}),(0,C.jsx)(S.Z,{id:"bl-select",sx:{width:"100%"},options:z,value:B,onChange:function(n,e){N(e)},autoHighlight:!0,getOptionLabel:function(n){return n.bl_number+" "+n.consignee_name},renderOption:function(n,e){return(0,C.jsxs)(u.Z,(0,r.Z)((0,r.Z)({component:"li"},n),{},{children:[e.bl_number," ",e.consignee_name]}))},renderInput:function(n){return(0,C.jsx)(f.Z,(0,r.Z)((0,r.Z)({},n),{},{inputProps:(0,r.Z)((0,r.Z)({},n.inputProps),{},{autoComplete:"new-password"})}))}})]}),(0,C.jsxs)(c.ZP,{item:!0,xs:6,children:[(0,C.jsx)(l.Z,{htmlFor:"bootstrap",children:"Charge"}),(0,C.jsx)(S.Z,{id:"charge-select",sx:{width:"100%"},options:T,autoHighlight:!0,value:R,onChange:function(n,e){U(e)},getOptionLabel:function(n){return n.name},renderOption:function(n,e){return(0,C.jsx)(u.Z,(0,r.Z)((0,r.Z)({component:"li"},n),{},{children:e.name}))},renderInput:function(n){return(0,C.jsx)(f.Z,(0,r.Z)((0,r.Z)({},n),{},{inputProps:(0,r.Z)((0,r.Z)({},n.inputProps),{},{autoComplete:"new-password"})}))}})]})]}),(0,C.jsxs)(c.ZP,{container:!0,spacing:3,mb:3,children:[(0,C.jsx)(c.ZP,{item:!0,xs:4,children:(0,C.jsxs)(d.Z,{spacing:1,children:[(0,C.jsx)(l.Z,{htmlFor:"bootstrap",children:"Amount"}),(0,C.jsx)(h.Z,{id:"email-login",type:"number",value:v.amount,name:"amount",onBlur:o,onChange:i,placeholder:"eg. John",fullWidth:!0,error:Boolean(s.amount&&e.amount)}),s.amount&&e.amount&&(0,C.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:e.amount})]})}),(0,C.jsx)(c.ZP,{item:!0,xs:8,children:(0,C.jsxs)(d.Z,{spacing:1,children:[(0,C.jsx)(m.Z,{children:"Attachments"}),(0,C.jsx)(k.Z,{setFileNames:W})]})})]}),(0,C.jsx)(c.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mg:3,children:(0,C.jsx)(c.ZP,{item:!0,xs:6,children:(0,C.jsx)(g.Z,{children:(0,C.jsx)(P.Z,{disableElevation:!0,loading:t,disabled:t,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Submit"})})})})]})}})})})})}},36594:function(n,e,t){t.d(e,{AG:function(){return _},Bl:function(){return N},Bm:function(){return L},CT:function(){return j},GV:function(){return b},Gn:function(){return P},HL:function(){return k},JN:function(){return y},OP:function(){return h},PB:function(){return v},Qb:function(){return l},SP:function(){return S},Um:function(){return m},b6:function(){return B},gi:function(){return p},kl:function(){return x},l2:function(){return w},nD:function(){return g},r2:function(){return Z},rW:function(){return d},vy:function(){return f},xr:function(){return C}});var r=t(56573),o=t(41209),i=t(58976);function a(n,e){return new Promise((function(t,i){r.Z.post(o.D.apiURL+n,e).then((function(n){n.headers,t(n.data)})).catch((function(n){n.response&&(401===n.response.status||400===n.response.status||500===n.response.status||n.response&&429===n.response.status||console.log("Error occurred, status: "+n.response.status)),console.log(n),i(n)}))}))}function s(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(a,s){r.Z.get(o.D.apiURL+n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){a(n.data)})).catch((function(n){n.response?n.response&&401===n.response.status&&e&&!t||n.response&&n.response.status:i.s&&i.s.enqueueSnackbar("No network available, Please Connect to a Network!",{variant:"warning"}),s(n)}))}))}function u(n,e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(a,s){r.Z.post(o.D.apiURL+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){a(n.data)})).catch((function(n){n.response&&401===n.response.status&&t&&!i||(n.response&&n.response.status,s(n))}))}))}function c(n,e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(a,s){r.Z.put(o.D.apiURL+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){a(n.data)})).catch((function(n){n.response&&401===n.response.status&&t&&!i||(n.response&&n.response.status,s(n))}))}))}function l(n,e){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r={};return""!==t&&(r.mfaCode=t),a("api/auth/login",{email:n,password:e},!1)}function f(n,e,t){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o={};return""!==r&&(o.mfaCode=r),u("api/auth/reset-password/"+t,{password:n,confirm_password:e},!1)}function d(){return s("api/v1/users-list/")}function h(n){return u("api/v1/register-user",n)}function p(n){return s("api/v1/user/"+n)}function m(n,e){return c("api/v1/user/"+n,e)}function g(){return s("api/v1/roles")}function v(n){return u("api/v1/bls",n)}function Z(){return s("api/v1/bls-list/")}function b(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[e?"include_charges=".concat("true"):"",t?"include_timeline=".concat("true"):""].filter(Boolean).join("&"),o="api/v1/bl/".concat(n).concat(r?"?".concat(r):"");return s(o)}function x(n){return s("api/v1/bl-attachments?bl_id="+n)}function j(){return s("api/v1/charges-list/")}function w(){return s("api/v1/bl-charges-list/")}function S(n){return u("api/v1/bl-charges",n)}function P(n){return s("api/v1/bl-charge/"+n)}function k(n,e){return c("api/v1/bl-charge/"+n,e)}function C(n){return s("api/v1/bl-charge-attachments?bl_charge_id="+n)}function _(n){return u("api/v1/vouchers",n)}function L(){return s("api/v1/vouchers-list/")}function y(n){return s("api/v1/voucher/"+n)}function B(n,e){return c("api/v1/voucher/"+n,e)}function N(n){return s("api/v1/voucher-attachments?voucher_id="+n)}},41209:function(n,e,t){t.d(e,{D:function(){return r}});var r={socketURL:"ws://127.0.0.1:5500/",mediaURL:"http://161.35.210.153:5000/media/v1/",apiURL:"http://161.35.210.153/"}}}]);
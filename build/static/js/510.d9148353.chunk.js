"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[510],{3510:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var s=n(29439),i=n(40621),r=n(9019),l=n(57829),a=n(75697),c=n(98466),o=n(19536),d=n(42832),h=n(69099),u=n(73319),g=n(61805),x=n(55585),j=n(81190),m=n(46417),f=function(e){var t=e.bl_charge;return console.log("Logger",t.status>=g.SU.VERIFIED&&null!==t.verified_by),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(j.Z,{progressDot:!0,current:t.status,direction:"vertical",items:[{title:"Requested",description:(0,m.jsxs)(m.Fragment,{children:["Requested by"," ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.created_by.first_name," ",t.created_by.last_name]})," ","at ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,a.gg)(t.created_at)," "]})]})},{title:"Verified",description:(0,m.jsx)(m.Fragment,{children:t.status>=g.SU.VERIFIED&&null!==t.verified_by?(0,m.jsxs)(m.Fragment,{children:[" ","Verified by"," ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.verified_by.first_name," ",t.verified_by.last_name]})," ","at ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,a.gg)(t.verified_at)," "]})," "]}):"Not verified"})},{title:"Approved",description:(0,m.jsx)(m.Fragment,{children:t.status>=g.SU.APPROVED&&null!==t.approved_by?(0,m.jsxs)(m.Fragment,{children:[" ","Approved by"," ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.approved_by.first_name," ",t.approved_by.last_name]})," ","at ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,a.gg)(t.approved_at)," "]})]}):"Not Aprroved"})},{title:"Paid",description:(0,m.jsx)(m.Fragment,{children:t.status===g.SU.PAID&&null!==t.paid_by?(0,m.jsxs)(m.Fragment,{children:[" ","Payments done by"," ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.paid_by.first_name," ",t.paid_by.last_name]})," ","at ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,a.gg)(t.paid_at)," "]})]}):"No payments done"})}]})})},b=n(4869),p=function(e){var t=e.bl_charge,n=e.editBlChargeStatus;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,children:[(0,m.jsxs)(r.ZP,{item:!0,xs:7,children:[(0,m.jsx)(o.Z,{children:"Bill Of loading details"}),(0,m.jsxs)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,children:[(0,m.jsx)(r.ZP,{item:!0,xs:6,children:(0,m.jsx)(u.k,{title:"Consignee Name",value:t.bill_of_loading.consignee_name})}),(0,m.jsx)(r.ZP,{item:!0,xs:6,children:(0,m.jsx)(u.k,{title:"Consignee Cellphone",value:t.bill_of_loading.consignee_cellphone})}),(0,m.jsx)(r.ZP,{item:!0,xs:6,children:(0,m.jsx)(u.k,{title:"Consignee Address",value:t.bill_of_loading.consignee_address})}),(0,m.jsx)(r.ZP,{item:!0,xs:6,children:(0,m.jsx)(u.k,{title:"Created At",value:(0,a.gg)(t.created_at)})})]})]}),(0,m.jsxs)(r.ZP,{item:!0,xs:5,children:[(0,m.jsx)(o.Z,{children:"Bl Charge History"}),t.status===g.SU.REJECTED?(0,m.jsx)(x.ZP,{status:"error",title:"Rejected",subTitle:(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(m.Fragment,{children:["Rejected by"," ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",t.rejected_by.first_name," ",t.rejected_by.last_name]})," ","at ",(0,m.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,a.gg)(t.rejected_at)," "]})]})})}):(0,m.jsx)(f,{bl_charge:t})]})]}),(0,m.jsx)(b.Z,{amount:t.amount}),(0,m.jsx)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"flex-end",children:(0,m.jsxs)(d.Z,{spacing:2,direction:"row",children:[(0,m.jsx)(h.Z,{variant:"outlined",color:"error",onClick:function(){return n(g.SU.REJECTED)},children:"Reject"}),(0,m.jsx)(h.Z,{variant:"outlined",color:"success",onClick:function(){return n(g.SU.VERIFIED)},children:"Verify"}),(0,m.jsx)(h.Z,{variant:"outlined",color:"success",onClick:function(){return n(g.SU.APPROVED)},children:"Approve"}),(0,m.jsx)(h.Z,{variant:"outlined",color:"success",onClick:function(){return n(g.SU.PAID)},children:"Paid"})]})})]})},_=n(47313),y=n(8105),Z=n(36594),v=n(29814),P=n(71415),C=function(e){var t=e.bl_charge,n=(0,_.useState)(!0),i=(0,s.Z)(n,2),l=i[0],a=i[1],c=(0,_.useState)([]),o=(0,s.Z)(c,2),d=o[0],h=o[1];return(0,_.useEffect)((function(){(0,Z.xr)(t.id).then((function(e){console.log(e),h(e),a(!1)})).catch((function(e){console.log(e)}))}),[]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(v.Ae,{isLoading:l,children:0===d.length?(0,m.jsx)(y.Z,{description:"No attachments"}):(0,m.jsx)(r.ZP,{container:!0,mb:3,mt:1,alignItems:"center",justifyContent:"flex-start",children:(0,m.jsx)(P.Z,{attachments:d})})})})},S=n(58467),E=n(77841),A=[{label:(0,m.jsx)("div",{style:{padding:4},children:"Details"}),value:g.sy.DETAILS},{label:(0,m.jsx)("div",{style:{padding:4},children:"Attachments"}),value:g.sy.ATTACHMENTS}],F=function(){var e=(0,_.useState)(!0),t=(0,s.Z)(e,2),n=t[0],o=t[1],d=(0,_.useState)(null),h=(0,s.Z)(d,2),u=h[0],x=h[1],j=(0,_.useState)(g.sy.DETAILS),f=(0,s.Z)(j,2),b=f[0],y=f[1],P=(0,S.s0)(),F=(0,S.UO)(),I=function(){(0,Z.Gn)(F.charge_id).then((function(e){console.log(e),x(e),o(!1)})).catch((function(e){console.log(e),E.Z.error("Failed to load Bill of Loading charge details"),P("/bl-charges",{replace:!0})}))};return(0,_.useEffect)((function(){I()}),[]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(v.tv,{isLoading:n,children:null!==u&&(0,m.jsx)(i.Z,{title:(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(r.ZP,{container:!0,spacing:3,alignItems:"center",children:[(0,m.jsxs)(r.ZP,{item:!0,xs:3,children:["Charge Number: #",u.charge_number]}),(0,m.jsxs)(r.ZP,{item:!0,xs:3,children:["Bl Number: #",u.bill_of_loading.bl_number]}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:6,sx:{ml:"auto"},children:(0,m.jsx)(r.ZP,{container:!0,alignItems:"center",justifyContent:"flex-end",pr:2,children:(0,a.AB)(u.status)})})]})}),content:!1,border:!1,boxShadow:!0,children:(0,m.jsxs)(l.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:[(0,m.jsx)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"center",children:(0,m.jsx)(c.Z,{style:{width:"60%"},block:!0,options:A,onChange:function(e){y(e)}})}),b===g.sy.DETAILS&&(0,m.jsx)(p,{bl_charge:u,editBlChargeStatus:function(e){return function(e){var t={status:e};(0,Z.HL)(F.charge_id,t).then((function(e){console.log(e),E.Z.success("BL charge status updated successfully"),I()})).catch((function(e){E.Z.error("Failed to updated BL charge status"),console.log(e)}))}(e)}}),b===g.sy.ATTACHMENTS&&(0,m.jsx)(C,{bl_charge:u})]})})})})}}}]);
"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[687],{69687:function(e,n,t){t.r(n);var i=t(29439),r=t(96996),a=t(47313),o=t(58467),l=t(19768),s=t(77841),c=t(40621),d=t(57829),u=t(46417);n.default=function(){var e=(0,a.useState)(null),n=(0,i.Z)(e,2),t=n[0],m=n[1],h=(0,a.useState)(null),p=(0,i.Z)(h,2),x=p[0],Z=p[1],g=(0,a.useState)(!0),f=(0,i.Z)(g,2),v=f[0],j=f[1],b=(0,a.useState)(!1),P=(0,i.Z)(b,2),S=P[0],_=P[1],y=(0,o.UO)(),w=(0,o.s0)();return(0,a.useEffect)((function(){(0,l.us)(y.pet_id).then((function(e){m({name:e.name,device_no:e.device_no}),Z(e.icon),j(!1)})).catch((function(e){console.log(e),s.Z.error("Failed to load pet details"),w("/pets",{replace:!0})}))}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(c.Z,{title:"Editing a pet",content:!1,border:!1,boxShadow:!0,children:(0,u.jsx)(d.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:!v&&(0,u.jsx)(r.Z,{loading:S,initialValues:t,initialPetIcon:x,onSubmitForm:function(e){return function(e){(0,l.mL)(y.pet_id,e).then((function(e){console.log("Response",e),s.Z.success("Pet was successfully edit"),w("/pets",{replace:!0})})).catch((function(e){_(!1),console.log(e),s.Z.error("Failed to add Pet")}))}(e)}})})})})}},96996:function(e,n,t){t.d(n,{Z:function(){return F}});var i=t(74165),r=t(15861),a=t(29439),o=t(57829),l=t(9019),s=t(42832),c=t(23306),d=t(37843),u=t(15480),m=t(19536),h=t(7410),p=t(28089),x=t(77841),Z=t(53764),g=t(82138),f=t(1122),v=t(62686),j=t(47313),b=t(41209),P=t(46417),S=function(e){var n="image/jpeg"===e.type||"image/png"===e.type;n||f.ZP.error("You can only upload JPG/PNG file!").then();var t=e.size/1024/1024<2;return t||f.ZP.error("Image must smaller than 2MB!").then(),n&&t},_=function(e){var n=e.setPetIcon,t=(0,j.useState)(!1),i=(0,a.Z)(t,2),r=i[0],o=i[1],l=(0,j.useState)(),s=(0,a.Z)(l,2),c=s[0],d=s[1],u=(0,P.jsxs)("div",{children:[r?(0,P.jsx)(Z.Z,{}):(0,P.jsx)(g.Z,{}),(0,P.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(v.Z,{name:"image",listType:"picture-circle",className:"avatar-uploader",showUploadList:!1,action:b.D.apiURL+"api/v1/upload-image",beforeUpload:S,onChange:function(e){var t=e.file,i=t.status,r=t.response;"uploading"!==i?"done"===i&&(n(r.name),function(e,n){var t=new FileReader;t.addEventListener("load",(function(){return n(t.result)})),t.readAsDataURL(e)}(e.file.originFileObj,(function(e){o(!1),d(e)}))):o(!0)},children:c?(0,P.jsx)("img",{src:c,alt:"avatar",style:{width:"100%"}}):u})})},y=t(69490),w=t(51406),F=function(e){var n=e.onSubmitForm,t=e.loading,Z=void 0!==t&&t,g=e.initialValues,f=void 0===g?null:g,v=e.initialPetIcon,b=void 0===v?null:v,S=(0,j.useState)(b),F=(0,a.Z)(S,2),C=F[0],I=F[1];return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(o.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,P.jsx)(h.J9,{initialValues:null!==f?f:{name:"",device_no:"",icon:null,submit:null},validationSchema:p.Ry().shape({name:p.Z_().max(255).required("Pet Name is required"),device_no:p.Z_().max(255).required("Device Number is required")}),onSubmit:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setErrors,r.setStatus,r.setSubmitting,null===C){e.next=5;break}return t.icon=C,n(t),e.abrupt("return");case 5:x.Z.error("Pet Icon not uploaded");case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),children:function(e){var n=e.errors,t=e.handleBlur,i=e.handleChange,r=e.handleSubmit,a=(e.isSubmitting,e.touched),o=e.values;return(0,P.jsxs)("form",{noValidate:!0,onSubmit:r,children:[(0,P.jsxs)(l.ZP,{container:!0,spacing:3,mb:3,children:[(0,P.jsx)(l.ZP,{item:!0,xs:6,children:(0,P.jsxs)(s.Z,{spacing:1,children:[(0,P.jsx)(c.Z,{htmlFor:"bootstrap",children:"Pet Name"}),(0,P.jsx)(d.Z,{id:"email-login",type:"text",value:o.name,name:"name",onBlur:t,onChange:i,placeholder:"eg. Cat",fullWidth:!0,error:Boolean(a.name&&n.name)}),a.name&&n.name&&(0,P.jsx)(u.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.name})]})}),(0,P.jsx)(l.ZP,{item:!0,xs:6,children:(0,P.jsxs)(s.Z,{spacing:1,children:[(0,P.jsx)(c.Z,{htmlFor:"bootstrap",children:"Device Number"}),(0,P.jsx)(d.Z,{id:"email-login",type:"text",value:o.device_no,name:"device_no",onBlur:t,onChange:i,placeholder:"eg. DEV_0094FGGG",fullWidth:!0,error:Boolean(a.device_no&&n.device_no)}),a.device_no&&n.device_no&&(0,P.jsx)(u.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.device_no})]})})]}),(0,P.jsx)(m.Z,{children:"Pet Icon"}),(0,P.jsx)(l.ZP,{container:!0,spacing:3,mt:3,mb:3,alignItems:"center",justifyContent:"center",children:(0,P.jsx)(l.ZP,{children:(0,P.jsx)(_,{setPetIcon:I})})}),(0,P.jsx)(l.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mg:3,children:(0,P.jsx)(l.ZP,{item:!0,xs:6,children:(0,P.jsx)(y.Z,{children:(0,P.jsx)(w.Z,{disableElevation:!0,disabled:Z,loading:Z,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Submit"})})})})]})}})})})}}}]);
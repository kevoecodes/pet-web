"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[731],{35509:function(e,n,t){var r=t(1413),i=t(93433),o=t(66736),s=t(55116),a=t(89939),c=t(41209),l=t(46417),u=s.Z.Dragger;n.Z=function(e){var n=e.setFileNames,t={name:"file",multiple:!0,action:c.D.apiURL+"api/v1/upload-file",onChange:function(e){console.log(e);var t=e.file,r=t.status,o=t.response;"uploading"!==r&&console.log(e.file,e.fileList),"done"===r?(n((function(e){return[].concat((0,i.Z)(e),[{file_name:o.name}])})),a.ZP.success("".concat(e.file.name," file uploaded successfully.")).then()):"error"===r&&a.ZP.error("".concat(e.file.name," file upload failed.")).then()},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,l.jsxs)(u,(0,r.Z)((0,r.Z)({},t),{},{children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(o.Z,{})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]}))}},3797:function(e,n,t){t(47313),t(40621);var r=t(95795),i=t(55585),o=t(69099),s=t(58467),a=t(46417);n.Z=function(e){var n=e.children,t=e.permission,c=e.unauthorized_page,l=void 0!==c&&c,u=(0,s.s0)();return(0,a.jsx)(a.Fragment,{children:r.Z.has_permission(t)?n:l?(0,a.jsx)(i.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:(0,a.jsx)(o.Z,{onClick:function(){u("/",{replace:!0})},type:"primary",children:"Back Home"})}):(0,a.jsx)(a.Fragment,{children:" "})})}},77841:function(e,n,t){var r=t(15671),i=t(43144),o=t(58976),s=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,[{key:"success",value:function(e){o.s&&o.s.enqueueSnackbar(e,{variant:"success"})}},{key:"error",value:function(e){o.s&&o.s.enqueueSnackbar(e,{variant:"error"})}}]),e}();n.Z=new s},1731:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var r=t(74165),i=t(15861),o=t(93433),s=t(29439),a=t(28089),c=t(57829),l=t(19536),u=t(9019),d=t(42832),h=t(23306),f=t(49914),p=t(15480),m=t(69490),g=t(7410),x=t(47313),v=t(40621),Z=t(4942),b=t(1413),j=t(47131),_=t(66469),C=t(71049),P=t(46417),S=function(e){var n=e.container_list,t=void 0===n?[]:n,r=e.setContainerList,i=e.onAdd,o=e.onDelete,s=function(e,n,t){r((function(r){return r.map((function(r){if(r.index===e){var i=(0,b.Z)((0,b.Z)({},r),{},(0,Z.Z)({},n,t));return console.log(i),i}return r}))}))};return t.map((function(e,n){return(0,P.jsxs)(u.ZP,{container:!0,spacing:3,mb:3,children:[(0,P.jsx)(u.ZP,{item:!0,xs:1,children:(0,P.jsx)(u.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:0===e.index?(0,P.jsx)(j.Z,{color:"primary","aria-label":"add an alarm",onClick:i,children:(0,P.jsx)(C.Z,{})}):(0,P.jsx)(j.Z,{color:"error","aria-label":"add an alarm",onClick:function(){return o(n)},children:(0,P.jsx)(_.Z,{})})})}),(0,P.jsx)(u.ZP,{item:!0,xs:4,children:(0,P.jsxs)(d.Z,{spacing:1,children:[(0,P.jsx)(h.Z,{htmlFor:"bootstrap",children:"Container Number"}),(0,P.jsx)(f.Z,{id:"email-login",type:"text",name:"first_name",onChange:function(n){return s(e.index,"container_no",n.target.value)},placeholder:"eg. P099291",fullWidth:!0})]})}),(0,P.jsx)(u.ZP,{item:!0,xs:4,children:(0,P.jsxs)(d.Z,{spacing:1,children:[(0,P.jsx)(h.Z,{htmlFor:"bootstrap",children:"Container Size"}),(0,P.jsx)(f.Z,{id:"email-login",type:"text",name:"first_name",onChange:function(n){return s(e.index,"container_size",n.target.value)},placeholder:"eg. John",fullWidth:!0})]})})]},e.index)}))},k=t(36594),w=t(77841),y=t(58467),B=t(51406),z=t(35509),L=t(3797),A=t(99743),D=function(){var e=(0,x.useState)(!1),n=(0,s.Z)(e,2),t=n[0],Z=n[1],b=(0,x.useState)([]),j=(0,s.Z)(b,2),_=j[0],C=j[1],D=(0,x.useState)([{index:0,container_no:"",container_size:""}]),N=(0,s.Z)(D,2),F=N[0],R=N[1],q=(0,y.s0)(),J=function(){R((function(e){return[].concat((0,o.Z)(e),[{index:Math.random(),container_no:"",container_size:""}])}))},O=function(e){Z(!0),e.containers=F,e.attachments=_,(0,k.PB)(e).then((function(e){console.log("Response"),w.Z.success("Bill of loading successfully added"),q("/bls",{replace:!0})})).catch((function(e){Z(!1),w.Z.error("Failed to add Bill of loading")}))};return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(L.Z,{permission:A.Z.BL_CREATE,unauthorized_page:!0,children:(0,P.jsx)(v.Z,{title:"Adding Bill Of Loading",content:!1,border:!1,boxShadow:!0,children:(0,P.jsx)(c.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,P.jsx)(g.J9,{initialValues:{bl_number:"",consignee_name:"",consignee_cellphone:"",consignee_address:"",containers:[],attachments:[],submit:null},validationSchema:a.Ry().shape({bl_number:a.Z_().max(255).required("Bl number is required"),consignee_cellphone:a.Z_().max(255).required("Consignee cellphone is required"),consignee_address:a.Z_().max(255).required("Consignee address is required"),consignee_name:a.Z_().max(255).required("Consignee name is required")}),onSubmit:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setErrors,t.setStatus,t.setSubmitting,O(n);case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),children:function(e){var n=e.errors,r=e.handleBlur,i=e.handleChange,o=e.handleSubmit,s=(e.isSubmitting,e.touched),a=e.values;return(0,P.jsxs)("form",{noValidate:!0,onSubmit:o,children:[(0,P.jsx)(l.Z,{textAlign:"left",children:" Bill of Loading Details"}),(0,P.jsxs)(u.ZP,{container:!0,spacing:3,mb:3,children:[(0,P.jsx)(u.ZP,{item:!0,xs:6,children:(0,P.jsxs)(d.Z,{spacing:1,children:[(0,P.jsx)(h.Z,{htmlFor:"bootstrap",children:"BL Number"}),(0,P.jsx)(f.Z,{id:"email-login",type:"text",value:a.bl_number,name:"bl_number",onBlur:r,onChange:i,placeholder:"eg. P3023423",fullWidth:!0,error:Boolean(s.bl_number&&n.bl_number)}),s.bl_number&&n.bl_number&&(0,P.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.bl_number})]})}),(0,P.jsx)(u.ZP,{item:!0,xs:6,children:(0,P.jsxs)(d.Z,{spacing:1,children:[(0,P.jsx)(l.Z,{style:{marginBottom:10},textAlign:"left",children:"Attachments"}),(0,P.jsx)(z.Z,{setFileNames:C})]})})]}),(0,P.jsx)(l.Z,{textAlign:"left",children:" Consignee Details"}),(0,P.jsxs)(u.ZP,{container:!0,spacing:3,mb:3,children:[(0,P.jsx)(u.ZP,{item:!0,xs:4,children:(0,P.jsxs)(d.Z,{spacing:1,children:[(0,P.jsx)(h.Z,{htmlFor:"bootstrap",children:"Name"}),(0,P.jsx)(f.Z,{id:"email-login",type:"text",value:a.consignee_name,name:"consignee_name",onBlur:r,onChange:i,placeholder:"eg. John",fullWidth:!0,error:Boolean(s.consignee_name&&n.consignee_name)}),s.consignee_name&&n.consignee_name&&(0,P.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.consignee_name})]})}),(0,P.jsx)(u.ZP,{item:!0,xs:4,children:(0,P.jsxs)(d.Z,{spacing:1,children:[(0,P.jsx)(h.Z,{htmlFor:"bootstrap",children:"Phone Number"}),(0,P.jsx)(f.Z,{id:"email-login",type:"text",value:a.consignee_cellphone,name:"consignee_cellphone",onBlur:r,onChange:i,placeholder:"eg. John",fullWidth:!0,error:Boolean(s.consignee_cellphone&&n.consignee_cellphone)}),s.consignee_cellphone&&n.consignee_cellphone&&(0,P.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.consignee_cellphone})]})}),(0,P.jsx)(u.ZP,{item:!0,xs:4,children:(0,P.jsxs)(d.Z,{spacing:1,children:[(0,P.jsx)(h.Z,{htmlFor:"bootstrap",children:"Address"}),(0,P.jsx)(f.Z,{id:"email-login",type:"text",value:a.consignee_address,name:"consignee_address",onBlur:r,onChange:i,placeholder:"eg. John",fullWidth:!0,error:Boolean(s.consignee_address&&n.consignee_address)}),s.consignee_address&&n.consignee_address&&(0,P.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.consignee_address})]})})]}),(0,P.jsx)(l.Z,{style:{marginBottom:10},textAlign:"left",children:"Containers Details"}),(0,P.jsx)(S,{container_list:F,setContainerList:R,onAdd:J,onDelete:function(e){return n=e,void R((function(e){return e.filter((function(e,t){return n!==t}))}));var n}}),(0,P.jsx)(u.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mg:3,children:(0,P.jsx)(u.ZP,{item:!0,xs:6,children:(0,P.jsx)(m.Z,{children:(0,P.jsx)(B.Z,{disableElevation:!0,loading:t,disabled:t,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Submit"})})})})]})}})})})})})}},36594:function(e,n,t){t.d(n,{AG:function(){return w},Bl:function(){return L},Bm:function(){return y},CT:function(){return j},GV:function(){return Z},Gn:function(){return P},HL:function(){return S},JN:function(){return B},OP:function(){return f},PB:function(){return x},Qb:function(){return u},SP:function(){return C},Um:function(){return m},b6:function(){return z},gi:function(){return p},kl:function(){return b},l2:function(){return _},nD:function(){return g},r2:function(){return v},rW:function(){return h},vy:function(){return d},xr:function(){return k}});var r=t(56573),i=t(41209),o=t(58976);function s(e,n){return new Promise((function(t,o){r.Z.post(i.D.apiURL+e,n).then((function(e){e.headers,t(e.data)})).catch((function(e){e.response&&(401===e.response.status||400===e.response.status||500===e.response.status||e.response&&429===e.response.status||console.log("Error occurred, status: "+e.response.status)),console.log(e),o(e)}))}))}function a(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(s,a){r.Z.get(i.D.apiURL+e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){s(e.data)})).catch((function(e){e.response?e.response&&401===e.response.status&&n&&!t||e.response&&e.response.status:o.s&&o.s.enqueueSnackbar("No network available, Please Connect to a Network!",{variant:"warning"}),a(e)}))}))}function c(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(s,a){r.Z.post(i.D.apiURL+e,n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){s(e.data)})).catch((function(e){e.response&&401===e.response.status&&t&&!o||(e.response&&e.response.status,a(e))}))}))}function l(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(s,a){r.Z.put(i.D.apiURL+e,n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){s(e.data)})).catch((function(e){e.response&&401===e.response.status&&t&&!o||(e.response&&e.response.status,a(e))}))}))}function u(e,n){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r={};return""!==t&&(r.mfaCode=t),s("api/auth/login",{email:e,password:n},!1)}function d(e,n,t){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i={};return""!==r&&(i.mfaCode=r),c("api/auth/reset-password/"+t,{password:e,confirm_password:n},!1)}function h(){return a("api/v1/users-list/")}function f(e){return c("api/v1/register-user",e)}function p(e){return a("api/v1/user/"+e)}function m(e,n){return l("api/v1/user/"+e,n)}function g(){return a("api/v1/roles")}function x(e){return c("api/v1/bls",e)}function v(){return a("api/v1/bls-list/")}function Z(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[n?"include_charges=".concat("true"):"",t?"include_timeline=".concat("true"):""].filter(Boolean).join("&"),i="api/v1/bl/".concat(e).concat(r?"?".concat(r):"");return a(i)}function b(e){return a("api/v1/bl-attachments?bl_id="+e)}function j(){return a("api/v1/charges-list/")}function _(){return a("api/v1/bl-charges-list/")}function C(e){return c("api/v1/bl-charges",e)}function P(e){return a("api/v1/bl-charge/"+e)}function S(e,n){return l("api/v1/bl-charge/"+e,n)}function k(e){return a("api/v1/bl-charge-attachments?bl_charge_id="+e)}function w(e){return c("api/v1/vouchers",e)}function y(){return a("api/v1/vouchers-list/")}function B(e){return a("api/v1/voucher/"+e)}function z(e,n){return l("api/v1/voucher/"+e,n)}function L(e){return a("api/v1/voucher-attachments?voucher_id="+e)}},41209:function(e,n,t){t.d(n,{D:function(){return r}});var r={socketURL:"ws://127.0.0.1:5500/",mediaURL:"http://161.35.210.153:5000/media/v1/",apiURL:"http://161.35.210.153/"}},71049:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45045)),o=t(46417),s=(0,i.default)((0,o.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineOutlined");n.Z=s},66469:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45045)),o=t(46417),s=(0,i.default)((0,o.jsx)("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutlineOutlined");n.Z=s}}]);
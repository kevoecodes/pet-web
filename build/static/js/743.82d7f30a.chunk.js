"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[743],{2661:function(e,n,i){var t=i(1413),l=i(79601),r=i(17592),s=i(17551),a=i(46417),o=(0,r.ZP)((function(e){return(0,a.jsx)(l.Z,(0,t.Z)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))}))((function(e){var n=e.theme;return{"& .MuiPaper-root":{borderRadius:3,marginTop:n.spacing(1),minWidth:140,backgroundColor:n.palette.grey[100],color:"light"===n.palette.mode?"rgb(55, 65, 81)":n.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.03) 0px 0px 0px 0px, rgba(0, 0, 0, 0.03) 0px 10px 7px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:n.palette.text.secondary,marginRight:n.spacing(1.5)},"&:active":{backgroundColor:(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}}}}));n.Z=o},75031:function(e,n,i){var t=i(29439),l=i(51629),r=i(66835),s=i(23477),a=i(24076),o=i(67478),c=i(57861),d=i(47131),h=i(51405),x=i(62323),u=i(69099),g=i(75697),m=i(32499),j=i(2661),p=i(10237),Z=i(17885),b=i(47313),f=i(58467),v=i(8105),C=i(46417);n.Z=function(e){var n=e.bl_charges,i=void 0===n?[]:n,y=e.onNoCharges,_=void 0===y?"No Charges":y,S=(0,b.useState)(null),P=(0,t.Z)(S,2),k=P[0],A=P[1],E=(0,b.useState)(null),T=(0,t.Z)(E,2),w=T[0],M=T[1],B=(0,b.useState)(0),I=(0,t.Z)(B,2),L=I[0],N=I[1],R=(0,b.useState)(10),D=(0,t.Z)(R,2),F=D[0],z=D[1],O=Boolean(k),H=(0,f.s0)(),U=function(){A(null)};return(0,C.jsx)(C.Fragment,{children:i.length>0?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.Z,{children:(0,C.jsxs)(r.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,C.jsx)(s.Z,{children:(0,C.jsxs)(a.Z,{children:[(0,C.jsx)(o.Z,{children:"Created At"}),(0,C.jsx)(o.Z,{children:"Charge Number"}),(0,C.jsx)(o.Z,{children:"Bl Number"}),(0,C.jsx)(o.Z,{children:"Charge"}),(0,C.jsx)(o.Z,{children:"Amount"}),(0,C.jsx)(o.Z,{children:"Status"}),(0,C.jsx)(o.Z,{children:"Actions"})]})}),(0,C.jsx)(c.Z,{children:i.slice(L*F,L*F+F).map((function(e,n){return(0,C.jsxs)(a.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,C.jsx)(o.Z,{children:(0,g.gg)(e.created_at)}),(0,C.jsx)(o.Z,{children:e.charge_number}),(0,C.jsx)(o.Z,{children:e.bill_of_loading.bl_number}),(0,C.jsx)(o.Z,{children:e.charge.name}),(0,C.jsx)(o.Z,{children:e.amount}),(0,C.jsx)(o.Z,{children:(0,g.AB)(e.status)}),(0,C.jsx)(o.Z,{children:(0,C.jsxs)("div",{children:[(0,C.jsx)(d.Z,{"aria-label":"more",id:"long-button","aria-controls":O?"demo-customized-menu":void 0,"aria-expanded":O?"true":void 0,disableElevation:!0,"aria-haspopup":"true",onClick:function(n){return i=n,M(e),void A(i.currentTarget);var i},children:(0,C.jsx)(m.Z,{})}),(0,C.jsxs)(j.Z,{id:"demo-customized-menu",anchorEl:k,open:O,onClose:U,MenuListProps:{"aria-labelledby":"demo-customized-menu"},children:[(0,C.jsxs)(h.Z,{onClick:function(){var e;e=w.id,H("/bl-charges/view/"+e,{replace:!0})},children:[(0,C.jsx)(p.Z,{style:{fontSize:25,color:"green"}}),"View"]}),(0,C.jsxs)(h.Z,{onClick:U,disableRipple:!0,children:[(0,C.jsx)(Z.Z,{style:{fontSize:25,color:"red"}}),"Delete"]})]})]})})]},n)}))})]})}),(0,C.jsx)(x.Z,{rowsPerPageOptions:[10,15,20],component:"div",count:i.length,rowsPerPage:F,page:L,onPageChange:function(e,n){N(n)},onRowsPerPageChange:function(e){z(+e.target.value),N(0)}})]}):(0,C.jsx)(v.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:(0,C.jsx)("span",{children:_}),children:(0,C.jsx)(u.Z,{onClick:function(){H("/bl-charges/add-bl-charge",{replace:!0})},type:"primary",children:"Create Now"})})})}},45743:function(e,n,i){i.r(n),i.d(n,{default:function(){return T}});var t=i(29439),l=i(40621),r=i(9019),s=i(57829),a=i(75697),o=i(57422),c=i(98466),d=i(61805),h=i(47313),x=i(29814),u=i(58467),g=i(36594),m=i(77841),j=i(19536),p=i(42832),Z=i(69099),b=i(73319),f=i(4869),v=i(31118),C=i(86948),y=i(46417),_=function(e){var n=e.bl_timeline.map((function(e,n){return{children:e.activity}}));return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{id:"scrollableDiv",style:{maxHeight:"40vh",overflow:"auto",padding:"20px"},children:(0,y.jsx)(C.Z,{dataLength:n.length,hasMore:n.length<50,endMessage:(0,y.jsx)(j.Z,{plain:!0,children:"It is all, nothing more \ud83e\udd10"}),scrollableTarget:"scrollableDiv",children:(0,y.jsx)(v.Z,{reverse:!0,items:n})})})})},S=function(e){var n=e.bill_of_loading,i=e.editBlStatus;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,children:[(0,y.jsxs)(r.ZP,{item:!0,xs:7,children:[(0,y.jsx)(j.Z,{children:"Bill Of loading details"}),(0,y.jsxs)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,children:[(0,y.jsx)(r.ZP,{item:!0,xs:6,children:(0,y.jsx)(b.k,{title:"Consignee Name",value:n.consignee_name})}),(0,y.jsx)(r.ZP,{item:!0,xs:6,children:(0,y.jsx)(b.k,{title:"Consignee Cellphone",value:n.consignee_cellphone})}),(0,y.jsx)(r.ZP,{item:!0,xs:6,children:(0,y.jsx)(b.k,{title:"Consignee Address",value:n.consignee_address})}),(0,y.jsx)(r.ZP,{item:!0,xs:6,children:(0,y.jsx)(b.k,{title:"Created At",value:(0,a.gg)(n.created_at)})})]})]}),(0,y.jsxs)(r.ZP,{item:!0,xs:5,children:[(0,y.jsx)(j.Z,{children:"Bill of loading Timeline"}),(0,y.jsx)(_,{bl_timeline:n.bl_timeline})]})]}),(0,y.jsx)(f.Z,{title:"TOTAL AMOUNT",amount:function(){var e=0;return n.bl_charges.forEach((function(n){e+=n.amount})),e}()}),(0,y.jsx)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"flex-end",children:(0,y.jsxs)(p.Z,{spacing:2,direction:"row",children:[n.status===d.R2.COMPLETE&&(0,y.jsx)(Z.Z,{variant:"outlined",color:"primary",onClick:function(){return i(d.SU.VERIFIED)},children:"Re-open"}),(0,y.jsx)(Z.Z,{disabled:!0,variant:"outlined",color:"success",onClick:function(){return i(d.SU.REJECTED)},children:"Mark Done"})]})})]})},P=i(75031),k=i(8105),A=i(71415),E=function(e){var n=e.bill_of_loading,i=(0,h.useState)(!0),l=(0,t.Z)(i,2),s=l[0],a=l[1],o=(0,h.useState)([]),c=(0,t.Z)(o,2),d=c[0],u=c[1];return(0,h.useEffect)((function(){(0,g.kl)(n.id).then((function(e){console.log(e),u(e),a(!1)})).catch((function(e){console.log(e)}))}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(x.Ae,{isLoading:s,children:0===d.length?(0,y.jsx)(k.Z,{description:"No attachments"}):(0,y.jsx)(r.ZP,{container:!0,mb:3,mt:1,alignItems:"center",justifyContent:"flex-start",children:(0,y.jsx)(A.Z,{attachments:d})})})})},T=function(){var e=(0,h.useState)(!0),n=(0,t.Z)(e,2),i=n[0],j=n[1],p=(0,h.useState)(null),Z=(0,t.Z)(p,2),b=Z[0],f=Z[1],v=(0,h.useState)(d.sy.DETAILS),C=(0,t.Z)(v,2),_=C[0],k=C[1],A=(0,u.s0)(),T=(0,u.UO)(),w=[{label:(0,y.jsx)("div",{style:{padding:4},children:"Details"}),value:d.sy.DETAILS},{label:(0,y.jsx)("div",{style:{padding:4},children:"Attachments"}),value:d.sy.ATTACHMENTS},{label:(0,y.jsxs)("div",{style:{padding:4},children:[(0,y.jsx)("span",{style:{paddingRight:5,paddingBottom:2},children:(0,y.jsx)(o.Z,{count:null!==b?b.bl_charges.length:0,style:{backgroundColor:"#a5a5a9",borderRadius:5}})}),"Bl Charges"]}),value:d.sy.BL_CHARGES}];return(0,h.useEffect)((function(){(0,g.GV)(T.bl_id,!0,!0).then((function(e){console.log(e),f(e),j(!1)})).catch((function(e){console.log(e),m.Z.error("Failed to load Bill of Loading details"),A("/bl-charges",{replace:!0})}))}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(x.tv,{isLoading:i,children:null!==b&&(0,y.jsx)(l.Z,{title:(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(r.ZP,{container:!0,spacing:3,alignItems:"center",children:[(0,y.jsxs)(r.ZP,{item:!0,xs:3,children:["Bl Number: #",b.bl_number]}),(0,y.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:6,sx:{ml:"auto"},children:(0,y.jsx)(r.ZP,{container:!0,alignItems:"center",justifyContent:"flex-end",pr:2,children:(0,a.ec)(b.status)})})]})}),content:!1,border:!1,boxShadow:!0,children:(0,y.jsxs)(s.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:[(0,y.jsx)(r.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"center",children:(0,y.jsx)(c.Z,{style:{width:"60%"},block:!0,options:w,onChange:function(e){k(e)}})}),_===d.sy.DETAILS&&(0,y.jsx)(S,{bill_of_loading:b,editBlStatus:function(e){}}),_===d.sy.ATTACHMENTS&&(0,y.jsx)(E,{bill_of_loading:b}),_===d.sy.BL_CHARGES&&(0,y.jsx)(P.Z,{bl_charges:b.bl_charges})]})})})})}}}]);